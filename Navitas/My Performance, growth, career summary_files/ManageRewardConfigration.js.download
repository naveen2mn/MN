var calledfrom="";var employeeIdToredirect=-1;function initRewardOnLoad(a){dwr.util.useLoadingMessage();viewPageSetUp(a);runFaq()}function viewPageSetUp(b){var a="-1";if(document.getElementById("selectedTimePeriod")!=null){a=document.getElementById("selectedTimePeriod").value}ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:b});adrh.viewAllRecords("ManageRewardConfigration",b,a,"",{async:defaultAsyncValue,callback:function(c){dwr.util.setValue("displayPageContent",c.response,{escapeHtml:false});writeBreadCrumbData();lazyload()}})}function initiateEmpReward(a){ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:"employeeSelection"});adrh.viewAllRecords("ManageRewardConfigration","employeeSelection",a,"",{async:defaultAsyncValue,callback:function(b){showFancyBox(b.response)}})}function viewRewardPopUp(c,a,b){calledfrom=c;if(b=="-1"){b=document.getElementById("empSearchName_hidden").value}ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:"setContextEmpForWorkflowMode"});adrh.executeCall("ManageRewardConfigration",b,"setContextEmpForWorkflowMode","","",{async:defaultAsyncValue,callback:function(d){if(d.error==true){displayConfirmationMsg("errorMsgOnPopup",d.errorMsg,"failure")}else{ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:c});adrh.viewRecordForEdit("ManageRewardConfigration","",c,b,"",{async:defaultAsyncValue,callback:function(e){showFancyBox(e.response)}})}}})}function viewAllocationPopUp(c){calledfrom=c;var b=document.getElementById("empSearchName_hidden").value;var a=document.getElementById("validateBudget").value;if(trim(a)!=""){if(a=="no"){jAlert(a_rewardPointsNotAvailable);return false}else{if(parseInt(a)<=0){jAlert(a_rewardPointsNotAvailable);return false}}}ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:c});adrh.viewAllRecords("ManageRewardConfigration",c,b,"",{async:defaultAsyncValue,callback:function(d){showFancyBox(d.response)}})}function allocateRewardBudget(e){var c=document.getElementById("newPoints").value;if(trim(c)==""){jAlert(a_specifyAllocatedPoints);return false}if(!_isInteger(c)){jAlert(a_invalidNumericValue,"",document.getElementById("newPoints"));return false}var a=document.getElementById("validateBudget").value;if(trim(a)!=""){if(a=="no"){jAlert(a_rewardPointsNotAvailable);return false}else{if(parseInt(a)<=0){jAlert(a_rewardPointsNotAvailable);return false}else{if((parseInt(a)-parseInt(c))<0){jAlert(a_rewardPointsNotAvailable);return false}}}}var d=new Object();d.empid=document.getElementById("seletedEmp").value;d.budgetPointsAllocated=dwr.util.byId("newPoints").value;var b=JSON.stringify(d);ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"executeCall",eventLabel:e});adrh.executeCall("ManageRewardConfigration","",e,b,"",{async:defaultAsyncValue,callback:function(f){if(f.error==true){displayConfirmationMsg("errorMsg",f.errorMsg,"failure")}else{displayConfirmationMsg("errorMsg",f.notificationMsg,"success")}}});closeFancyBox();viewPageSetUp("configure");dwr.util.byId("allocateRow").style.display="";dwr.util.byId("usedRow").style.display="";dwr.util.byId("balanceRow").style.display=""}function getEmpRecord(b,a){ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:b});adrh.viewAllRecords("ManageRewardConfigration",b,a,"",{async:defaultAsyncValue,callback:function(c){showFancyBox(c.response);dwr.util.byId("allocateRow").style.display="";dwr.util.byId("usedRow").style.display="";dwr.util.byId("balanceRow").style.display=""}})}function editRecordReward(c,a,b){calledfrom=b;ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewAllRecords",eventLabel:b});adrh.viewAllRecords("ManageRewardConfigration",b,c,"",{async:defaultAsyncValue,callback:function(d){showFancyBox(d.response)}})}function numericFilter(a){a.value=a.value.replace(/[\-\+\*\/\<\>\,\`\~\^\!\@\#\$\%\&\a-zA-Z]/ig,"")}function modifyRewardBudget(e,a,d){var c=document.getElementById("morePoints").value;if(trim(c)==""&&c.length<=0){jAlert(a_specifyUpdatedAmount);return false}if(!_isInteger(c)){jAlert(a_invalidNumericValue,"",document.getElementById("morePoints"));return false}var b=e+"^"+c;ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"executeCall",eventLabel:d});adrh.executeCall("ManageRewardConfigration","",d,b,"",{async:defaultAsyncValue,callback:function(f){if(f.error==true){displayConfirmationMsg("errorMsg",f.errorMsg,"failure")}else{displayConfirmationMsg("errorMsg",f.notificationMsg,"success")}}});closeFancyBox();viewPageSetUp("configure")}function getBudgetByRewawrdType(b){var d=b-1;var c=document.getElementById("rewardTypeId"+d).value;var g=document.getElementById("currRewardMasterBudget");var a=document.getElementById("rewardBudgetCell");var f=document.getElementById("fk_rewardtype");var e=document.getElementById("rewardTypeName"+d).value;f.value=e;if(trim(c)==""){a.innerHTML="-";g.value="0"}else{a.innerHTML=c;g.value=c}}function balanceReverse(d,c,b){var a=c+"^"+b;jConfirm(c_employeeBalanceTxrToYourBalance,"",function(e){ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"executeCall",eventLabel:d});e.close();adrh.executeCall("ManageRewardConfigration","",d,a,"",{async:defaultAsyncValue,callback:function(f){viewPageSetUp("configure")}})})}function getEmpRewardByWorkflowId(b,a){calledFrom=b;ga("send","event",{eventCategory:"ManageRewardConfigration",eventAction:"viewRecordForEdit",eventLabel:b});adrh.viewRecordForEdit("ManageRewardConfigration",a,b,"","",{async:defaultAsyncValue,callback:function(c){if(c.error==true){displayConfirmationMsg("errorMsgOnPopUp",c.errorMsg,"failure")}else{showFancyBox(c.response);displayConfirmationMsg("errorMsgOnPopUp",c.notificationMsg,"success")}}})}function closePopUpAndReturnBack(){if(calledfrom=="viewRewardPage_fromDashBoard"){window.location.href="runet.do?activity=submit&mod=TeamDashboard"}else{if(calledfrom=="allocatePoints"||calledfrom=="editMode"){closeFancyBox();viewPageSetUp("configure")}else{if(calledfrom=="pending"){closeFancyBox();viewPageSetUp("pending")}else{if(calledfrom=="calledFromTeamProfile"){var a="mod=TeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageRewardConfigration",a,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(b){window.location.href="runet.do?activity=submit&enc="+b.responseTeo.dataObject}})}else{if(calledfrom=="calledFromHRTeamProfile"){var a="mod=HRTeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageRewardConfigration",a,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(b){window.location.href="runet.do?activity=submit&enc="+b.responseTeo.dataObject}})}else{closeFancyBox()}}}}}}function getInitTeoManageRewardConfigration(){var a=new Object();a.rewardtypeid=dwr.util.getValue("rewardType");a.fk_rewardtype=dwr.util.getValue("fk_rewardtype");a.employeenumber=trim(dwr.util.getValue("empId"));a.rewardformempId=dwr.util.getValue("rewardFromId");a.details=dwr.util.getValue("description");a.rewardeeName=dwr.util.getValue("rewardeeName");a.rewardform=dwr.util.getValue("rewardform");a.rewarddate=dwr.util.getValue("currentDate")+"";a.p1=dwr.util.getValue("currentTimePeriod");a.p2=dwr.util.getValue("currRewardMasterBudget");return a}function postStartAjaxManageRewardConfigration(a,b){if(a.indexOf("Duplicate Record")>=0){a=err_duplicateRecord}if(a.indexOf("Exception")>=0){a=err_errorDuringFetch}adrh.viewRecordForEdit("ManageRewardConfigration","","setErrMsgOnSession",a,"",{async:defaultAsyncValue,callback:function(c){if(calledfrom=="viewRewardPage_fromDashBoard"){window.location.href="runet.do?activity=submit&mod=TeamDashboard"}else{if(calledfrom=="calledFromTeamProfile"){if(employeeIdToredirect>0){var d="mod=TeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageRewardConfigration",d,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(e){window.location.href="runet.do?activity=submit&enc="+e.responseTeo.dataObject}})}else{jAlert(a_rewards_profileRedirectFailed)}}else{if(calledfrom=="calledFromHRTeamProfile"){if(employeeIdToredirect>0){var d="mod=HRTeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageRewardConfigration",d,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(e){window.location.href="runet.do?activity=submit&enc="+e.responseTeo.dataObject}})}else{jAlert(a_rewards_profileRedirectFailed)}}else{closeFancyBox();viewPageSetUp("viewRewardDetails");displayConfirmationMsg("errorMsg",a,"success")}}}}})}function validateManageRewardConfigration(){var c=dwr.util.getValue("seletedEmp");if(c==-1){jAlert(a_manpower_selectEmployee);return false}var d=document.getElementById("rewardType").selectedIndex;if(d<=0){jAlert(a_rewards_selectRewardType);return false}var a=document.getElementById("currRewardMasterBudget").value;if(trim(a)==""&&a=="-"){jAlert(a_rewards_rewardPointsNotAvailable);return false}if(parseInt(a)>0){var b=document.getElementById("validateBudget").value;if(trim(b)!=""){if(b=="no"){jAlert(a_rewards_rewardPointsNotAvailable);return false}else{if((parseInt(b)-parseInt(a))<0){jAlert(a_rewards_rewardPointsNotAvailable);return false}}}}return true}function setWFVariablesManageRewardConfigration(){document.getElementById("curPersistenceClass").value="saigun.empxtrack.persistencehelpers.RewardsPersistence";document.getElementById("workflowType").value="RewardsData";document.getElementById("wfAction").value="create-submit"};
