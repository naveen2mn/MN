function shoeHideFormulaBlock(a){_selectedProportionTo=a.value;if(_selectedProportionTo==1){document.getElementById("formulaBlock").style.display="";document.getElementsByName("amountmodified").readonly=true}else{document.getElementById("formulaBlock").style.display="none";document.getElementsByName("amountmodified").readonly=false}return false}function getCheckedBoxValueByName(a){var e=document.getElementsByName(a);var d=0;var f=0;for(var b=0;b<e.length;b++){if(e[b].checked){f==0?d=e[b].value:d=d+","+e[b].value;f++}}return d}function initSetupPayPeriodTypeMaster(){dwr.util.useLoadingMessage();fillTableSalaryStructurePageDetail("1","")}function fillTableSalaryStructurePageDetail(b,a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"displayAll"});adrh.viewAllRecords("SetupSalaryStructures","displayAll","",b,{async:defaultAsyncValue,callback:function(c){dwr.util.setValue("displayContent",c.response,{escapeHtml:false});displayConfirmationMsg("errorMsg",a,"success");styleRadio("selectedMode");initializeCalendar();runFaq();writeBreadCrumbData()}})}function styleRadio(c){var a=document.getElementsByName(c);for(var b=0;b<a.length;b++){if(a[b].checked){a[b].parentNode.parentNode.className="selected"}else{a[b].parentNode.parentNode.className="unselected"}}}function setupAddSalaryStructureBlock(){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"addStructure"});adrh.viewAllRecords("SetupSalaryStructures","addStructure","",0,{async:defaultAsyncValue,callback:function(a){dwr.util.setValue("displayContent",a.response,{escapeHtml:false});initializeCalendar();writeBreadCrumbData()}})}function setupEditSalaryStructureBlock(a,c,b){closeFancyBox();ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"editOne"});adrh.viewAllRecords("SetupSalaryStructures","editOne","",a,{async:defaultAsyncValue,callback:function(d){dwr.util.setValue("displayContent",d.response,{escapeHtml:false});displayConfirmationMsg("errorMsg",b,"success");initializeCalendar();writeBreadCrumbData()}})}function setupAssignEmployeeToSalaryStructureBlock(a,b){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"setupAssignEmployeeToSalaryStructure"});closeFancyBox();adrh.viewAllRecords("SetupSalaryStructures","setupAssignEmployeeToSalaryStructure","",a,{async:defaultAsyncValue,callback:function(f){dwr.util.setValue("ViewEmployeeSearchMode","",{escapeHtml:false});dwr.util.setValue("displayContent",f.response,{escapeHtml:false});writeBreadCrumbData();initializeCalendar();displayConfirmationMsg("errorMsg",b,"success");if(document.getElementById("recordsPresentForDataTable")!=null){var e=new Array();if(document.getElementById("dateColunms")!=null){var c=document.getElementById("dateColunms").value;c=$.trim(c).split(",");for(var d=0;d<c.length;d++){e[d]=parseInt(c[d])}}var g=new Array();if(document.getElementById("notSortableColunms")!=null){var h=document.getElementById("notSortableColunms").value;h=$.trim(h).split(",");for(var d=0;d<h.length;d++){g[d]=parseInt(h[d])}}$("#renderTableHeaderArray").dataTable({sPaginationType:"full_numbers",stateSave:true,aoColumnDefs:[{sType:"date",aTargets:e},{bSortable:false,aTargets:g}]})}}})}function setupAssignedSalaryStructureToEmployeeEditBlock(a,b){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"modifySalaryStructureToEmployeeAssignMode"});closeFancyBox();adrh.viewAllRecords("SetupSalaryStructures","modifySalaryStructureToEmployeeAssignMode","nonPopupMode",a,{async:defaultAsyncValue,callback:function(c){dwr.util.setValue("displayContent",c.response,{escapeHtml:false});dwr.util.setValue("ViewEmployeeSearchMode","",{escapeHtml:false});writeBreadCrumbData();initializeCalendar();displayConfirmationMsg("errorMsg",b,"success")}})}function fillTablePageDetailDataEmployeeSalaryDetail(b,a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:b});adrh.viewAllRecords("SetupSalaryStructures",b,"","",{async:defaultAsyncValue,callback:function(c){dwr.util.setValue("employeeSalaryView",c.response,{escapeHtml:false});displayConfirmationMsg("errorMsgEmployeeSalaryDetail",a,"success");writeBreadCrumbData()}})}function setupAssignedSalaryStructureToEmployeeEditBlockOnPopup(a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"modifySalaryStructureToEmployeeAssignMode"});adrh.viewAllRecords("SetupSalaryStructures","modifySalaryStructureToEmployeeAssignMode","popupMode","-1",{async:defaultAsyncValue,callback:function(b){showFancyBox(b.response);initializeCalendar();displayConfirmationMsg("errorMsgOnPopup",a,"success")}})}function setupAssignedSalaryStructureToEmployeeViewBlockOnPopup(a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"viewSalaryStructureToEmployeeAssignMode"});adrh.viewAllRecords("SetupSalaryStructures","viewSalaryStructureToEmployeeAssignMode","popupMode","-1",{async:defaultAsyncValue,callback:function(b){showFancyBox(b.response);initializeCalendar();displayConfirmationMsg("errorMsgOnPopup",a,"success")}})}function setupAssignedSalaryStructureToEmployeeAddBlock(a,b){closeFancyBox();ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"addSalaryStructureToEmployeeAssignMode"});adrh.viewAllRecords("SetupSalaryStructures","addSalaryStructureToEmployeeAssignMode","nonPopupMode",a,{async:defaultAsyncValue,callback:function(c){dwr.util.setValue("displayContent",c.response,{escapeHtml:false});writeBreadCrumbData();initializeCalendar();displayConfirmationMsg("errorMsg",b,"success")}})}function setupAssignedSalaryStructureToEmployeeAddBlockOnPopup(b){var a=document.getElementById("gradeid").value;ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"addSalaryStructureToEmployeeAssignMode"});adrh.viewAllRecords("SetupSalaryStructures","addSalaryStructureToEmployeeAssignMode","popupMode",a,{async:defaultAsyncValue,callback:function(c){showFancyBox(c.response);initializeCalendar();displayConfirmationMsg("errorMsgOnPopup",b,"success")}})}function addMoreHead(a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"setupAddHEadMode"});adrh.viewAllRecords("SetupSalaryStructures","setupAddHEadMode","",a,{async:defaultAsyncValue,callback:function(b){dwr.util.setValue("errorMsg","",{escapeHtml:false});dwr.util.setValue("displayContent",b.response,{escapeHtml:false})}})}function deleteHead(a,c){var b=document.getElementById("gradeid").value;if(confirm(a_payroll_confirmRecordDelete)){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"executeCall",eventLabel:"deleteHead"});adrh.executeCall("SetupSalaryStructures",a,"deleteHead","","",{async:defaultAsyncValue,callback:function(d){if(d.error==true){dwr.util.setValue("errorMsg",d.errorMsg,{escapeHtml:false})}else{setupEditSalaryStructureBlock(b,c,d.notificationMsg)}}})}}function activeInactiveSalaryStructure(a,b){if(confirm(c_payroll_activateInactivateRecord)){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"executeCall",eventLabel:"activeInactiveStructure"});adrh.executeCall("SetupSalaryStructures",a,"activeInactiveStructure",b,"",{async:defaultAsyncValue,callback:function(c){if(c.error==true){fillTableSalaryStructurePageDetail(b,c.errorMsg)}else{fillTableSalaryStructurePageDetail(b,c.notificationMsg)}}})}}function deleteSalaryStructure(a,b){if(confirm(a_payroll_confirmRecordDelete)){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"executeCall",eventLabel:"deleteStructure"});adrh.executeCall("SetupSalaryStructures",a,"deleteStructure","","",{async:defaultAsyncValue,callback:function(c){if(c.error==true){fillTableSalaryStructurePageDetail(b,c.errorMsg)}else{fillTableSalaryStructurePageDetail(b,c.notificationMsg)}}})}}function initializeObject(){var d=document.getElementById("noOfHeads").value;var g=new Object();var f=document.getElementById("gradename").value;var e=0;if(document.getElementById("isactive").checked){e=1}g.gradename=f;g.gradeid=document.getElementById("gradeid").value;g.payPeriodTypeId=document.getElementById("payPeriodTypeId").value;g.empSalaryMode=document.getElementById("empSalaryMode").value;g.maxctc=document.getElementById("maxctc").value;g.loyalityFlag=1;g.description=document.getElementById("description").value;g.isactive=e;var b=new Array(d);var a;for(var c=0;c<d;c++){a=new Object();a.salaryheadid=document.getElementById("salaryheadid"+c).value;if(document.getElementById("selectedHead"+c)!=null){if(document.getElementById("selectedHead"+c).checked){a.applicableHead=true}else{a.applicableHead=false}}else{a.applicableHead=true}a.proportionTo=document.getElementById("proportionTo"+c).value;a.headname=document.getElementById("headname"+c).value;a.dependentSalHeadFlag=document.getElementById("dependentSalHeadFlag"+c).value;a.ctcFlag=document.getElementById("ctcFlag"+c).value;a.suplAllowFlag=document.getElementById("suplAllowFlag"+c).value;a.newHeadFlag=document.getElementById("newHeadFlag"+c).value;a.description=document.getElementById("description"+c).value;a.headConstant=document.getElementById("headConstant"+c).value;a.mandatoryFlag=document.getElementById("mandatoryFlag"+c).value;a.p7=document.getElementById("p7"+c).value;a.amount=document.getElementById("amount"+c).value;a.formula=document.getElementById("formula"+c).value;a.detailId=document.getElementById("detailId"+c).value;a.selectedProportionTo=document.getElementById("selectedProportionTo"+c).value;if(document.getElementById("p1"+c)!=null){a.p1=document.getElementById("p1"+c).value}if(document.getElementById("p2"+c)!=null){a.p2=document.getElementById("p2"+c).value}if(document.getElementById("p8"+c)!=null){a.p8=document.getElementById("p8"+c).value}if(document.getElementById("p3"+c)!=null){a.p3=document.getElementById("p3"+c).value}b[c]=a}g.salaryHeadsTEO=b;return g}function initializeObjectForEmpStructure(){var c=document.getElementById("noOfHeads").value;var f=new Object();var e=new Object();f.structureId=document.getElementById("structureId").value;e.empId=document.getElementById("empId").value;e.id=f.structureId;e.employeeName=document.getElementById("employeeName").value;e.empNo=document.getElementById("empNo").value;e.levelName=document.getElementById("levelName").value;e.managerName=document.getElementById("managerName").value;e.departmentName=document.getElementById("departmentName").value;e.designationName=document.getElementById("designationName").value;e.jdName=document.getElementById("jdName").value;e.salaryStructureName=document.getElementById("salaryStructureName").value;e.effectiveDate=document.getElementById("effectiveDate").value;f.empStructureTeo=e;var d=new Array(c);var a;for(var b=0;b<c;b++){a=new Object();a.headId=document.getElementById("headId"+b).value;a.headName=document.getElementById("headName"+b).value;a.formula=document.getElementById("formula"+b).value;a.headConstant=document.getElementById("headConstant"+b).value;a.proportionToId=document.getElementById("proportionToId"+b).value;a.ctcFlag=document.getElementById("ctcFlag"+b).value;a.proportionPercent=document.getElementById("proportionPercent"+b).value;a.ctcFlag=document.getElementById("ctcFlag"+b).value;a.suggestedAmount=document.getElementById("suggestedAmount"+b).value;a.allocatedAmount=document.getElementById("suggestedAmount"+b).value;if(document.getElementById("p1"+b)!=null){a.p1=document.getElementById("p1"+b).value}if(document.getElementById("p2"+b)!=null){a.p2=document.getElementById("p2"+b).value}if(document.getElementById("p8"+b)!=null){a.p8=document.getElementById("p8"+b).value}d[b]=a}f.empPayRollHeads=d;return f}function reCalculateStructure(d){var a=document.getElementById("gradeid").value;var e=initializeObject();var b=JSON.stringify(e);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"createSalaryStructure",eventLabel:"createSalaryStructure"});var c=a+"#reCalculate#"+d;adrh.executeCall("SetupSalaryStructures",b,"createSalaryStructure",c,"",{async:defaultAsyncValue,callback:function(f){if(f.responseTeo.dataObject.error==true){dwr.util.setValue("errorMsg",f.responseTeo.dataObject.errorMsg,{escapeHtml:false})}else{dwr.util.setValue("displayContent",f.responseTeo.dataObject.response,{escapeHtml:false});initializeCalendar()}}})}function moveHeadType(a,d,e){var f=initializeObject();var b=JSON.stringify(f);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"createSalaryStructure",eventLabel:"createSalaryStructure"});var c=a+"#"+e+"#"+d;adrh.executeCall("SetupSalaryStructures",b,"createSalaryStructure",c,"",{async:defaultAsyncValue,callback:function(g){if(g.responseTeo.dataObject.error==true){dwr.util.setValue("errorMsg",g.responseTeo.dataObject.errorMsg,{escapeHtml:false})}else{dwr.util.setValue("displayContent",g.responseTeo.dataObject.response,{escapeHtml:false});initializeCalendar()}}})}function saveHeadValue(h,a){var e=document.getElementById("noOfHeads").value;var d=new Object();d.gradeid=document.getElementById("gradeid").value;d.payPeriodTypeId=document.getElementById("payPeriodTypeId").value;d.gradename=document.getElementById("gradename").value;d.empSalaryMode=document.getElementById("empSalaryMode").value;d.maxctc=document.getElementById("maxctc").value;d.loyalityFlag=1;d.description=document.getElementById("description").value;var b=0;if(document.getElementById("isactive").checked){b=1}d.isactive=b;var i=new Array(e);var k;for(var g=0;g<e;g++){k=new Object();k.salaryheadid=document.getElementById("salaryheadid"+g).value;k.proportionTo=document.getElementById("proportionTo"+g).value;k.headname=document.getElementById("headnamemodified"+g).value;k.dependentSalHeadFlag=document.getElementById("dependentSalHeadFlag"+g).value;k.ctcFlag=document.getElementById("ctcFlag"+g).value;k.suplAllowFlag=document.getElementById("suplAllowFlag"+g).value;k.newHeadFlag=document.getElementById("newHeadFlag"+g).value;k.description=document.getElementById("description"+g).value;k.headConstant=document.getElementById("headConstant"+g).value;k.mandatoryFlag=document.getElementById("mandatoryFlag"+g).value;k.p7=document.getElementById("p7"+g).value;k.amount=document.getElementById("amountmodified"+g).value;k.selectedProportionTo=document.getElementById("selectedProportionTomodified"+g).value;if(document.getElementById("p1"+g)!=null){k.p1=document.getElementById("p1"+g).value}if(document.getElementById("p2"+g)!=null){k.p2=document.getElementById("p2"+g).value}if(document.getElementById("p8"+g)!=null){k.p8=document.getElementById("p8"+g).value}k.formula=document.getElementById("formulamodified"+g).value;k.detailId=document.getElementById("detailId"+g).value;i[g]=k}d.salaryHeadsTEO=i;var f=JSON.stringify(d);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"createSalaryStructure",eventLabel:"createSalaryStructure"});var c=h+"#saveHeadValue#"+a;adrh.executeCall("SetupSalaryStructures",f,"createSalaryStructure",c,"",{async:defaultAsyncValue,callback:function(j){if(j.responseTeo.dataObject.error==true){displayConfirmationMsg("errorMsg",j.responseTeo.dataObject.errorMsg,"failure")}else{displayConfirmationMsg("errorMsg",j.responseTeo.dataObject.notificationMsg,"success");setupEditSalaryStructureBlock(j.responseTeo.dataObject.workflowId,"modify",j.responseTeo.dataObject.notificationMsg)}}})}function setupEditHeadBlock(a,d){var e=initializeObject();var b=JSON.stringify(e);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"createSalaryStructure",eventLabel:"createSalaryStructure"});var c=a+"#setupEditHEadMode#"+d;adrh.executeCall("SetupSalaryStructures",b,"createSalaryStructure",c,"",{async:defaultAsyncValue,callback:function(f){if(f.responseTeo.dataObject.error==true){dwr.util.setValue("errorMsgOnpopup",f.responseTeo.dataObject.errorMsg,{escapeHtml:false})}else{showFancyBox(f.responseTeo.dataObject.response)}}})}function reCalculateEmpSalaryStructure(c){var b=initializeObjectForEmpStructure();var a=JSON.stringify(b);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"assignSalaryStructureToEmployee",eventLabel:"assignSalaryStructureToEmployee"});if(c=="popupMode"){adrh.executeCall("SetupSalaryStructures",a,"assignSalaryStructureToEmployee","reCalculateEmpSalaryStructure","",{async:defaultAsyncValue,callback:function(d){if(d.responseTeo.dataObject.error==true){dwr.util.setValue("errorMsgOnPopup",d.responseTeo.dataObject.errorMsg,{escapeHtml:false})}else{showFancyBox(d.responseTeo.dataObject.response);initializeCalendar();dwr.util.setValue("errorMsgOnPopup",d.responseTeo.dataObject.notificationMsg,{escapeHtml:false})}}})}else{adrh.executeCall("SetupSalaryStructures",a,"assignSalaryStructureToEmployee","reCalculateEmpSalaryStructure","",{async:defaultAsyncValue,callback:function(d){if(d.responseTeo.dataObject.error==true){dwr.util.setValue("errorMsg",d.responseTeo.dataObject.errorMsg,{escapeHtml:false})}else{dwr.util.setValue("errorMsg",d.responseTeo.dataObject.notificationMsg,{escapeHtml:false});dwr.util.setValue("displayContent",d.responseTeo.dataObject.response,{escapeHtml:false});initializeCalendar()}}});closeFancyBox()}}function copySuggestedAmtToAllocatedAmt(){jConfirm(a_payroll_setUpSalaryStructure_suggestedAmt,"",function(d){d.close();var c=document.getElementById("noOfHeads").value;for(var a=0;a<c;a++){var b=document.getElementById("suggestedAmount"+a).value;document.getElementById("allocatedAmount"+a).value=b}});return false}function saveEmpStructure(e,b,f,d){var c=initializeObjectForEmpStructure();var a=JSON.stringify(c);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"assignSalaryStructureToEmployee",eventLabel:"assignSalaryStructureToEmployee"});if(f=="save"){adrh.executeCall("SetupSalaryStructures",a,"assignSalaryStructureToEmployee",f,d,{async:defaultAsyncValue,callback:function(g){if(g.responseTeo.dataObject.error==true){displayConfirmationMsg("errorMsg",g.responseTeo.dataObject.errorMsg,"failure")}else{displayConfirmationMsg("errorMsg",g.responseTeo.dataObject.notificationMsg,"success");if(d!="popupMode"){setupAssignedSalaryStructureToEmployeeEditBlock(e,g.responseTeo.dataObject.notificationMsg)}else{setupAssignedSalaryStructureToEmployeeEditBlockOnPopup(g.responseTeo.dataObject.notificationMsg)}}}})}else{adrh.executeCall("SetupSalaryStructures",a,"assignSalaryStructureToEmployee",f,d,{async:defaultAsyncValue,callback:function(g){if(g.responseTeo.dataObject.error==true){displayConfirmationMsg("errorMsg",g.responseTeo.dataObject.errorMsg,"failure")}else{if(d!="popupMode"){setupAssignEmployeeToSalaryStructureBlock(b,g.responseTeo.dataObject.notificationMsg)}else{closeFancyBox();fillAllInfo()}}}})}}function cancelPopup(){closeFancyBox();fillAllInfo()}function addHeadToSalaryStructure(){var a=document.getElementById("gradeid").value;var c=new Object();var b=getCheckedBoxValueByName("selectedHeads");if(b==0){jAlert(a_payroll_selectHead);return false}ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"executeCall",eventLabel:"addHeadToSalaryStructure"});adrh.executeCall("SetupSalaryStructures",a,"addHeadToSalaryStructure","",b,{async:defaultAsyncValue,callback:function(d){if(d.error==true){displayConfirmationMsg("errorMsg",d.errorMsg,"failure")}else{displayConfirmationMsg("errorMsg",d.notificationMsg,"success");setupEditSalaryStructureBlock(a,"modify",d.notificationMsg)}}})}function saveUpdateStructure(g){var a=document.getElementById("gradeid").value;var d=0;if(document.getElementById("isactive").checked){d=1}var e=document.getElementById("gradename").value;if(trim(e)==""){jAlert(a_payroll_structureName,"",document.getElementById("gradename"));return false}if(d==0){if(confirm(c_payroll_structureNameInactive)==false){return false}}var f=initializeObject();if(g=="addStructureAndClose"||g=="addStructure"){f.checkHeads=getCheckedBoxValueByName("checkedIds")}var b=JSON.stringify(f);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"createSalaryStructure",eventLabel:"createSalaryStructure"});if(g=="updateStructure"||g=="addStructure"){var c=a+"#"+g+"#modify";adrh.executeCall("SetupSalaryStructures",b,"createSalaryStructure",c,"",{async:defaultAsyncValue,callback:function(h){if(h.responseTeo.dataObject.error==true){displayConfirmationMsg("errorMsg",h.responseTeo.dataObject.errorMsg,"failure")}else{displayConfirmationMsg("errorMsg",h.responseTeo.dataObject.notificationMsg,"success");setupEditSalaryStructureBlock(h.responseTeo.dataObject.workflowId,"modify",h.responseTeo.dataObject.notificationMsg)}}})}else{var c=a+"#"+g;adrh.executeCall("SetupSalaryStructures",b,"createSalaryStructure",c,"",{async:defaultAsyncValue,callback:function(h){var i="";if(h.responseTeo.dataObject.error==true){i=h.responseTeo.dataObject.errorMsg}else{i=h.responseTeo.dataObject.notificationMsg}fillTableSalaryStructurePageDetail(1,i)}})}}function showSearchBlock(b,c,a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:b});adrh.viewAllRecords("SetupSalaryStructures",b,"",c,{async:defaultAsyncValue,callback:function(d){showFancyBox(d.response);displayConfirmationMsg("errorMsgOnPopup",a,"success")}})}function setupSelectSalaryStructureMode(a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"setupSelectSalaryStructureMode"});adrh.viewAllRecords("SetupSalaryStructures","setupSelectSalaryStructureMode","","",{async:defaultAsyncValue,callback:function(b){showFancyBox(b.response);displayConfirmationMsg("errorMsgOnPopup",a,"success")}})}function viewEmpSalaryStructureDetailByGradId(a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewAllRecords",eventLabel:"viewTeamSalaryStructureToEmployeeAssignMode"});adrh.viewAllRecords("SetupSalaryStructures","viewTeamSalaryStructureToEmployeeAssignMode",a,"-1",{async:defaultAsyncValue,callback:function(b){showFancyBox(b.response);writeBreadCrumbData();initializeCalendar()}})}function getSearchEmployeeDecrypted(d,b,a){var c=-1;if(a.length==0){if(document.getElementById("employeeName_hidden")!=null){c=document.getElementById("employeeName_hidden").value;if(parseInt(c)==-1){jAlert(a_payroll_selectValidEmployee);return false}}}else{c=a}ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewRecordForEdit",eventLabel:d});adrh.viewRecordForEdit("SetupSalaryStructures",c,d,"","",{async:defaultAsyncValue,callback:function(e){if(e.error==true){displayConfirmationMsg("errorMsg",e.errorMsg,"failure")}else{setupAssignedSalaryStructureToEmployeeAddBlock(b,e.notificationMsg)}}})}function submitSearchEmployee(d,b,a){var c=-1;if(document.getElementById("employeeName_hidden")!=null){c=document.getElementById("employeeName_hidden").value;if(parseInt(c)==-1){jAlert(a_payroll_selectValidEmployee);return false}}showSalaryIncrementForm(c,"changeSalarySructureFromSalStructure")}function setupMasterDependentHeads(b,a){ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"viewRecordForEdit",eventLabel:"setupMasterDependentHeads"});adrh.viewRecordForEdit("SetupSalaryStructures",b,"setupMasterDependentHeads",a,"",{async:defaultAsyncValue,callback:function(c){if(c.error==true){displayConfirmationMsg("errorMsg",c.errorMsg,"failure")}else{showFancyBox(c.response)}}})}function saveMasterDependentHeads(){var a=new Object();a.gradeid=document.getElementById("gradeid").value;var k=new Array();var e=0;var j=document.getElementById("dependentHeads");var b=document.getElementById("masterSalaryheadId").value;var h=document.getElementById("masterHeadConstant").value;var g=document.getElementById("masterHeadAmount").value;var f=document.getElementById("masterHeadp7").value;var l=document.getElementById("masterHeadp1").value;var o=document.getElementById("modifiedByEmp");var n=new Object();n.salaryheadid=b;n.amount=document.getElementById(n.salaryheadid+".amount").value;n.p1=l;n.p7=f;if(o.checked){n.p2="modifiableByEmp"}else{n.p2="modifyNotAllowed"}k[e++]=n;if(j!=null&&j.options!=null&&j.options.length>0){for(var d=0;d<j.options.length;d++){var c=j.options[d];n=new Object();n.salaryheadid=c.value;n.amount=document.getElementById(n.salaryheadid+".amount").value;n.p7=document.getElementById(n.salaryheadid+".p7").value;n.maxlimit=document.getElementById(n.salaryheadid+".maxlimit").value;n.percentage=document.getElementById(n.salaryheadid+".percentage").value;n.formula=document.getElementById(n.salaryheadid+".formula").value;n.proportionTo=document.getElementById(n.salaryheadid+".proportionTo").value;if(c.selected==true){n.p1=h}else{n.p1=" "}k[e++]=n}}a.salaryHeadsTEO=k;var m=JSON.stringify(a);ga("send","event",{eventCategory:"SetupSalaryStructures",eventAction:"executeCall",eventLabel:"saveMasterDependentHeads"});adrh.executeCall("SetupSalaryStructures",m,"saveMasterDependentHeads","","",{async:defaultAsyncValue,callback:function(i){if(i.error==true){displayConfirmationMsg("errorMsgOnpopup",i.errorMsg,"failure")}else{setupEditSalaryStructureBlock(a.gradeid,"modify",i.notificationMsg);closeFancyBox()}}})}function selectEmployeeOnEnterKey(c,b){var a;if(window.event){a=window.event.keyCode}else{a=c.which}if(a==13){getSearchEmployee("setContextEmployee",b,"");return false}}function cancelRecord(){fillTableSalaryStructurePageDetail("1","")}function cancelRecordPopup(){closeFancyBox()};
