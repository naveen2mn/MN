var calledfrom="";var employeeIdToredirect=-1;function initPageOnLoad(){viewPageSetUp();runFaq()}function viewPageSetUp(){var a="-1";if(document.getElementById("selectedFinancialPeriodId")!=null){a=document.getElementById("selectedFinancialPeriodId").value}ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"viewAllRecords",eventLabel:"viewDisciplinary"});adrh.viewAllRecords("ManageDisciplinaryIncident","viewDisciplinary",a,"",{async:defaultAsyncValue,callback:function(b){dwr.util.setValue("displayPageContent",b.response,{escapeHtml:false});writeBreadCrumbData();lazyload()}})}function initiateEmpDisciplinaryAction(a){ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"viewAllRecords",eventLabel:"employeeSelection"});adrh.viewAllRecords("ManageDisciplinaryIncident","employeeSelection",a,"",{async:defaultAsyncValue,callback:function(b){showFancyBox(b.response)}})}function viewDisciplinaryPopUp(c,a,b){calledfrom=c;if(b=="-1"){b=document.getElementById("empSearchName_hidden").value}ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"executeCall",eventLabel:"setContextEmpForWorkflowMode"});adrh.executeCall("ManageDisciplinaryIncident",b,"setContextEmpForWorkflowMode","","",{async:defaultAsyncValue,callback:function(d){if(d.error==true){displayConfirmationMsg("errorMsgOnPopup",d.errorMsg,"failure")}else{ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"viewRecordForEdit",eventLabel:c});adrh.viewRecordForEdit("ManageDisciplinaryIncident","",c,b,"",{async:defaultAsyncValue,callback:function(e){showFancyBox(e.response);initializeCalendar()}})}}})}function getSelectedEmpId(b){var d=document.getElementById("seletedEmp");var f=d.options[b].value;var c=d.options[b].text;var a=document.getElementById("empId");a.value=f;var e=document.getElementById("empName");e.value=c;ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"viewRecordForEdit",eventLabel:"viewDisciplinaryPage"});adrh.viewRecordForEdit("ManageDisciplinaryIncident","","viewDisciplinaryPage",f,"",{async:defaultAsyncValue,callback:function(g){showFancyBox(g.response);initializeCalendar()}})}function getEmpDisciplinaryByWorkflowId(c,b,a){calledFrom=c;ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"viewRecordForEdit",eventLabel:c});adrh.viewRecordForEdit("ManageDisciplinaryIncident",b,c,a,"",{async:defaultAsyncValue,callback:function(d){if(d.error==true){displayConfirmationMsg("errorMsgOnPopUp",d.errorMsg,"failure")}else{showFancyBox(d.response);displayConfirmationMsg("errorMsgOnPopUp",d.notificationMsg,"success");if(c=="calledFromWorkflowByMgr"){initializeCalendar()}}}})}function closePopUpAndReturnBack(){if(calledfrom=="viewDisciplinary_fromDashBoard"){window.location.href="runet.do?activity=submit&mod=TeamDashboard"}else{if(calledfrom=="calledFromTeamProfile"){var a="mod=TeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageDisciplinaryIncident",a,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(b){window.location.href="runet.do?activity=submit&enc="+b.responseTeo.dataObject}})}else{if(calledfrom=="calledFromHRTeamProfile"){var a="mod=HRTeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageDisciplinaryIncident",a,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(b){window.location.href="runet.do?activity=submit&enc="+b.responseTeo.dataObject}})}else{closeFancyBox()}}}}function getDisciplinaryType(b){var c=b-1;var a=document.getElementById("disciplinaryTypeId"+c).value;var e=document.getElementById("disciplinaryTypeName"+c).value;var f=document.getElementById("fk_disciplinarytype");f.value=e;var d=document.getElementById("disciplinaryTypeId");d.value=a}function archivedisciplineDetailsForAnEmployee(a){jConfirm(a_disciplineIncident_confirmArchive,"",function(b){b.close();adrh.executeCall("ManageDisciplinaryIncident",a,"archivedisciplineDetailsForAnEmployee","","",{async:defaultAsyncValue,callback:function(c){viewPageSetUp("approved");displayConfirmationMsg("errorMsg",c.notificationMsg,"success")}})})}function createPIPPlanForAnEmployee(a){var b="-1";adrh.viewAllRecords("ManageDisciplinaryIncident","selectCorrectiveActionPlan",b,a,{async:defaultAsyncValue,callback:function(c){showFancyBox(c.response)}})}function getPIPPlanDetails(){var b=document.getElementById("selectedMultiFlowAppraisalPlan").value;var a=document.getElementById("selectedDisciplinaryId").value;adrh.viewAllRecords("ManageDisciplinaryIncident","getPIPPlanDetails",b,a,{async:defaultAsyncValue,callback:function(c){dwr.util.setValue("getPIPPlanDetails",c.response,{escapeHtml:false})}})}function initiateCorrectiveActionForAnEmployee(){dwr.util.useLoadingMessage();var c=new Object();var a=document.getElementById("selectedDisciplinaryId").value;c.planType=document.getElementById("planType").value;c.planCode=document.getElementById("planCode").value;c.planWorkflow=document.getElementById("planWorkflow").value;c.planStartDate=document.getElementById("planStartDate").value;c.planEndDate=document.getElementById("planEndDate").value;c.selectedEmployeeList=document.getElementById("empSearchName_hidden").value;c.p4=a;var b=JSON.stringify(c);jConfirm(a_correctiveAction_confirmInitiate,"",function(d){d.close();ga("send","event",{eventCategory:"CorrectiveActionPlanHandler",eventAction:"executeCall",eventLabel:"initiateCorrectiveActionForAnEmployee"});adrh.executeCall("CorrectiveActionPlanHandler",b,"initiatePIPForSubordinateOnSelectedPlan","","",{async:defaultAsyncValue,callback:function(e){if(e.error==true){displayConfirmationMsg("errorMsgOnPopup",e.errorMsg,"success")}else{var f=e.responseTeo.dataObject;adrh.executeCall("ManageDisciplinaryIncident",a,"bindDisciplineDetailsForAnEmployeeWithCorrectiveAction",f,"",{async:defaultAsyncValue,callback:function(g){window.location.href="runet.do?activity=submit&mod=TeamCorrectiveAction"}})}}})})}function getInitTeoManageDisciplinaryIncident(){var a=new Object();a.disciplinaryTypeId=dwr.util.getValue("disciplinaryTypeId");a.fk_disciplinarytype=dwr.util.getValue("fk_disciplinarytype");a.employeenumber=trim(dwr.util.getValue("empId"));a.employeename=trim(dwr.util.getValue("empName"));a.broughtnoticeby=dwr.util.getValue("broughtnoticeby");a.boughtNoticeName=dwr.util.getValue("boughtNoticeName");a.date=dwr.util.getValue("startDate")+"";a.description=dwr.util.getValue("description");a.actiontaken=dwr.util.getValue("actiontaken");return a}function postStartAjaxManageDisciplinaryIncident(a,b){if(a.indexOf("Exception")>=0){a="<div class='err'>There is some problem while fatching record.</div>"}ga("send","event",{eventCategory:"ManageDisciplinaryIncident",eventAction:"viewRecordForEdit",eventLabel:"setErrMsgOnSession"});adrh.viewRecordForEdit("ManageDisciplinaryIncident","","setErrMsgOnSession",a,"",{async:defaultAsyncValue,callback:function(c){if(calledfrom=="viewDisciplinary_fromDashBoard"){window.location.href="runet.do?activity=submit&mod=TeamDashboard"}else{if(calledfrom=="calledFromHRTeamProfile"){if(employeeIdToredirect>0){var d="mod=HRTeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageDisciplinaryIncident",d,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(e){window.location.href="runet.do?activity=submit&enc="+e.responseTeo.dataObject}})}else{jAlert(a_discipline_incorrectEmployeeProfileViewFailed)}}else{if(calledfrom=="calledFromTeamProfile"){if(employeeIdToredirect>0){var d="mod=TeamProfile&secondaryVar=extendedDwrMode^displayTeamMemberProfile,empId^"+employeeIdToredirect;adrh.executeCall("ManageDisciplinaryIncident",d,"encryptJsUrl","","",{async:defaultAsyncValue,callback:function(e){window.location.href="runet.do?activity=submit&enc="+e.responseTeo.dataObject}})}else{jAlert(a_discipline_incorrectEmployeeProfileViewFailed)}}else{closeFancyBox();viewPageSetUp("viewDisciplinary");displayConfirmationMsg("errorMsg",a,"success")}}}}})}function validateManageDisciplinaryIncident(){if(trim(calledfrom)!="viewDisciplinary_fromDashBoard"&&trim(calledfrom)!="calledFromTeamProfile"&&trim(calledfrom)!="calledFromHRTeamProfile"&&trim(calledfrom)!="calledFromWorkflowByMgr"){var d=document.getElementById("seletedEmp").selectedIndex;if(d<=0){jAlert(a_manpower_selectEmployee);return false}}var a=document.getElementById("disciplinaryTypeId").selectedIndex;if(a<=0){jAlert(a_discipline_selectTypeOfAction);return false}var c=document.getElementById("startDate").value;if(trim(c)==""){jAlert(a_discipline_specifyIncidentDate);return false}var b=document.getElementById("currentDate").value;if(compareDates(c,b)==1){jAlert(a_discipline_incorrectIncidentDate);return false}return true}function setWFVariablesManageDisciplinaryIncident(){document.getElementById("curPersistenceClass").value="saigun.empxtrack.persistencehelpers.DisciplinaryPersistence";document.getElementById("workflowType").value="DisciplinaryData";document.getElementById("wfAction").value="create-submit"};
