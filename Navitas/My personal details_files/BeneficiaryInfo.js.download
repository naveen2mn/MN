function getInitTeoBeneficiaryHandler(){var f=0;var h=document.getElementById("counter");var e=document.getElementById("add_bene_counter");var d=new Array();var a=document.getElementById("_visibleBeneficiaryCustomFields");if(a!=null){var g=a.value.split(",")}if(h!=null){for(var c=0;c<h.value;c++){d[c]=new Object();if(dwr.util.getValue("bene_Id_"+c)==""){d[c].beneficiaryInfoId=-1}else{d[c].beneficiaryInfoId=dwr.util.getValue("bene_Id_"+c)}if(document.getElementById("bene_depen_Id_"+c)!=null&&document.getElementById("bene_depen_Id_"+c).value!=""){d[c].dependentId=document.getElementById("bene_depen_Id_"+c).value}else{d[c].dependentId=-1}d[c].name=dwr.util.getValue("bene_name_"+c);d[c].dob=dwr.util.getValue("bene_dob_"+c);d[c].empId=dwr.util.getValue("empId");d[c].gender=dwr.util.getValue("bene_gender_"+c);d[c].relationship=dwr.util.getValue("bene_relationShip_"+c);d[c].percentageBenefit=dwr.util.getValue("percentageId_"+c);if(document.getElementById("bene_p1_"+c)!=null){d[c].p1=dwr.util.getValue("bene_p1_"+c)}if(document.getElementById("bene_p2_"+c)!=null){d[c].p2=dwr.util.getValue("bene_p2_"+c)}if(document.getElementById("bene_p3_"+c)!=null){d[c].p3=dwr.util.getValue("bene_p3_"+c)}if(document.getElementById("bene_p4_"+c)!=null){d[c].p4=dwr.util.getValue("bene_p4_"+c)}if(document.getElementById("bene_p5_"+c)!=null){d[c].p5=dwr.util.getValue("bene_p5_"+c)}if(document.getElementById("bene_p6_"+c)!=null){d[c].p6=dwr.util.getValue("bene_p6_"+c)}if(document.getElementById("bene_p7_"+c)!=null){d[c].p7=dwr.util.getValue("bene_p7_"+c)}if(document.getElementById("bene_p8_"+c)!=null){d[c].p8=dwr.util.getValue("bene_p8_"+c)}if(document.getElementById("bene_p9_"+c)!=null){d[c].p9=dwr.util.getValue("bene_p9_"+c)}if(document.getElementById("bene_p10_"+c)!=null){d[c].p10=dwr.util.getValue("bene_p10_"+c)}f++}}if(e!=null){for(var b=0;b<e.value;b++){d[f]=new Object();d[f].beneficiaryInfoId=-1;d[f].dependentId=-1;d[f].name=dwr.util.getValue("add_bene_name_"+b);d[f].dob=dwr.util.getValue("add_bene_dob_"+b);d[f].empId=dwr.util.getValue("add_bene_empId");d[f].gender=dwr.util.getValue("add_bene_gender_"+b);d[f].relationship=dwr.util.getValue("add_bene_relationShip_"+b);d[f].percentageBenefit=dwr.util.getValue("add_bene_percentageId_"+b);if(document.getElementById("add_bene_p1_"+b)!=null){d[f].p1=dwr.util.getValue("add_bene_p1_"+b)}if(document.getElementById("add_bene_p2_"+b)!=null){d[f].p2=dwr.util.getValue("add_bene_p2_"+b)}if(document.getElementById("add_bene_p3_"+b)!=null){d[f].p3=dwr.util.getValue("add_bene_p3_"+b)}if(document.getElementById("add_bene_p4_"+b)!=null){d[f].p4=dwr.util.getValue("add_bene_p4_"+b)}if(document.getElementById("add_bene_p5_"+b)!=null){d[f].p5=dwr.util.getValue("add_bene_p5_"+b)}if(document.getElementById("add_bene_p6_"+b)!=null){d[f].p6=dwr.util.getValue("add_bene_p6_"+b)}if(document.getElementById("add_bene_p7_"+b)!=null){d[f].p7=dwr.util.getValue("add_bene_p7_"+b)}if(document.getElementById("add_bene_p8_"+b)!=null){d[f].p8=dwr.util.getValue("add_bene_p8_"+b)}if(document.getElementById("add_bene_p9_"+b)!=null){d[f].p9=dwr.util.getValue("add_bene_p9_"+b)}if(document.getElementById("add_bene_p10_"+b)!=null){d[f].p10=dwr.util.getValue("add_bene_p10_"+b)}f++}}return d}function initPageOnLoad(a){dwr.util.useLoadingMessage();viewPageSetUp(a)}function editEmployeeBanificiaryDetail(){ga("send","event",{eventCategory:"BeneficiaryHandler",eventAction:"viewRecordForEdit",eventLabel:"editBeneficiaryDetail"});adrh.viewRecordForEdit("BeneficiaryHandler","","editBeneficiaryDetail","","",{async:defaultAsyncValue,callback:function(a){showFancyBox(a.response);initializeCalendar()}})}function addNewRow(){var c=document.getElementById("Beneficiary_table");var z=c.rows.length;var e=c.insertRow(z);var g=parseInt(document.getElementById("add_bene_counter").value);var B=document.getElementById("_visibleBeneficiaryCustomFields");var u=e.insertCell(0);var q=e.insertCell(1);var o=e.insertCell(2);var m=e.insertCell(3);var k=e.insertCell(4);var v=document.createElement("input");var r=document.createElement("input");var p=document.createElement("select");var n=document.createElement("select");var l=document.createElement("input");v.name="BeneficiaryName";r.name="date_dob";p.name="BeneficiaryName.gender";n.name="BeneficiaryName.relationShip";l.name="percentageId";v.id="add_bene_name_"+g;v.className="form-control";r.id="add_bene_dob_"+g;r.className="form-control";p.id="add_bene_gender_"+g;p.className="form-control";n.id="add_bene_relationShip_"+g;n.className="form-control";l.id="add_bene_percentageId_"+g;l.className="form-control";l.size="10";var f=document.getElementById("add_bene_gender_0");for(var A=0;A<f.options.length;A++){p.options[A]=new Option(f.options[A].text,f.options[A].value)}var w=document.getElementById("add_bene_relationShip_0");for(var A=0;A<w.options.length;A++){n.options[A]=new Option(w.options[A].text,w.options[A].value)}u.appendChild(v);q.appendChild(r);o.appendChild(p);m.appendChild(n);k.appendChild(l);var a=["add_bene_fieldName","add_bene_fieldMandatoryLabel","add_bene_fieldMandatoryVal","type","minLength","maxLength","minValue","maxValue"];var d=5;var t=0;if(B!=null){var b=B.value.split(",");t=b.length;for(var A=0;A<t;A++){d=5+parseInt(A);var C=e.insertCell(d);var s=document.createElement("input");s.id="add_bene_"+b[A]+"_"+g;s.className="form-control";C.appendChild(s);for(var y=0;y<a.length;y++){var x=document.createElement("input");x.type="hidden";if(y>2){x.id="add_bene_field"+b[A]+"_"+a[y]+g}else{x.id=a[y]+A+g}if(y==0){x.value="add_bene_"+b[A]+"_"+g}else{if(y>0&&y<3){if(document.getElementById(a[y]+"00")!=null){x.value=document.getElementById(a[y]+"00").value}}else{if(document.getElementById("add_bene_field"+b[A]+"_"+a[y]+"0")!=null){x.value=document.getElementById("add_bene_field"+b[A]+"_"+a[y]+"0").value}}}c.appendChild(x)}}}d=5+parseInt(t);var h=e.insertCell(d);g=g+1;document.getElementById("add_bene_counter").value=g;h.innerHTML='<a href="#" onClick="javascript:deleteRow(this);return false;" title="" class="li_img_button" data-title="Delete"><img src="images/client/tenant-lite/li_erase.png" ></a>';initializeCalendar()}function deleteRow(c){var a=c.parentNode.parentNode.rowIndex;document.getElementById("Beneficiary_table").deleteRow(a);var b=document.getElementById("add_bene_counter").value;document.getElementById("add_bene_counter").value=b-1}function addEmployeeBanificiaryDetail(){ga("send","event",{eventCategory:"BeneficiaryHandler",eventAction:"viewRecordForEdit",eventLabel:"addBeneficiaryDetail"});adrh.viewRecordForEdit("BeneficiaryHandler","","addBeneficiaryDetail","","",{async:defaultAsyncValue,callback:function(a){dwr.util.setValue("newBeneficiaryRecord",a.response,{escapeHtml:false});initializeCalendar()}})}function startAjaxWorkflowForBeneficiaryUpdate(f){if(validateBeneficiaryHandler()){userWFActionEmpBeneficiary=f;var b=getInitTeoBeneficiaryHandler();dwr.util.getValues(b);var e={workflowId:-1,workflowName:null,workflowType:null,workflowState:null,wfAction:null,wfUserRole:null,wfContextEmpId:-1,wfChangeAction:null,workflowTimePeriodId:-1,wfId:-1,curPersistenceClass:"",mode:"singleEmployee"};setWFVariablesBeneficiaryHandler();dwr.util.getValues(e);var d=JSON.stringify(b);var a=JSON.stringify(e);var c=-1;var g=document.getElementById("uploadFile");ga("send","event",{eventCategory:"BeneficiaryHandler",eventAction:"startAjaxWorkflow",eventLabel:"startAjaxWorkflow"});if(g!=null&&trim(g.value).length>0){adrh.executeCall("BeneficiaryHandler",d,"startAjaxWorkflow","",a,g,{async:defaultAsyncValue,callback:function(h){postStartAjaxEmpRelationshipDetail(h.responseTeo.dataObject.errorMsg,h.responseTeo.dataObject.workflowId)}})}else{adrh.executeCall("BeneficiaryHandler",d,"startAjaxWorkflow","",a,null,{async:defaultAsyncValue,callback:function(h){postStartAjaxEmpRelationshipDetail(h.responseTeo.dataObject.errorMsg,h.responseTeo.dataObject.workflowId)}})}return true}else{return false}}var userWFActionEmpBeneficiary="";function postStartAjaxBeneficiaryHandler(b,c){fillTablePageDetailDataBeneficiaryHandler("beneficiaryInfo","");fillTablePageDetailDataDependentsInfoDetails("myProfileDependentView","");fillTablePageDetailDataEmpHobbiesInterestsDetail("myProfileHobbiesView","");fillTablePageDetailDataEmpKnownLanguagesDetail("myProfileLanguageView","");if(currentPage=="MyProfileOverview"){fillTablePageDetailDataEmployeeBasicDetail("myProfileView7","")}else{fillTablePageDetailDataViewEditEmployeeBasicDetail("myProfileView6","")}closeFancyBox();displayConfirmationMsg("errorMsgDependentsInfoDetails",b,"success");if(c>0){var a=document.getElementById("benefitsEnabledForTenant");if(a!=null&&a.value=="true"){jConfirm(a_empprofile_updateBenefits_onDataChange,"",function(d){d.close();window.location.href=basePath+"/runet.do?activity=submit&mod=MyBenefits"})}}}function validateBeneficiaryHandler(){var m=document.getElementById("counter").value;if(parseInt(m)<=0){var b=document.getElementById("saveAllowForAdd");if(b==null||b.value!="true"){jAlert(a_beneficiary_addnew_beneficiary);return false}}var l=document.getElementById("add_bene_counter");var g=0;for(var s=0;s<m;s++){var n=document.getElementById("percentageId_"+s).value;var o=document.getElementById("bene_IsDependent_"+s);if(isNaN(n)){jAlert(a_empprofile_beneficiaryAllocationError);return false}if(parseInt(n)<0){jAlert(a_empprofile_beneficiaryAllocationError);return false}g=g+parseInt(n);if(document.getElementById("bene_name_"+s)!=null&&document.getElementById("bene_name_"+s).value==""){jAlert(a_beneficiary_addBeneficiaryName,"",document.getElementById("bene_name_"+s));document.getElementById("bene_name_"+s).style.borderColor="red";return false}if(o!=null&&o.value=="true"){if(document.getElementById("bene_dob_"+s)!=null&&document.getElementById("bene_dob_"+s).value==""){jAlert(a_empprofile_beneficiaryDOBError,"",document.getElementById("bene_dob_"+s));document.getElementById("bene_dob_"+s).style.borderColor="red";return false}}if(dwr.util.getValue("bene_gender_"+s)==-1){jAlert(a_empprofile_beneficiaryGenderError,"",document.getElementById("bene_gender_"+s));document.getElementById("bene_gender_"+s).style.borderColor="red";return false}if(dwr.util.getValue("bene_relationShip_"+s)==-1){jAlert(a_empprofile_beneficiaryRelationshipError,"",document.getElementById("bene_relationShip_"+s));document.getElementById("bene_relationShip_"+s).style.borderColor="red";return false}if(document.getElementById("sizeOfAdditionalFields")!=null){var u=document.getElementById("sizeOfAdditionalFields").value;for(var q=0;q<u;q++){if(document.getElementById("fieldName"+q+s)!=null){var c=document.getElementById("fieldName"+q+s).value;var e=document.getElementById(c);var h=document.getElementById("field"+c+"_type");var a=document.getElementById("fieldMandatoryLabel"+q+s).value;if(e!=null){if(document.getElementById("fieldMandatoryVal"+q+s)!=null&&document.getElementById("fieldMandatoryVal"+q+s).value.toUpperCase()=="Yes".toUpperCase()){if(e.value==""||e.value=="-1"){jAlert(a_empprofile_specifyValueFor2+a,"",e);e.style.borderColor="red";return false}}if(h!=null&&h.value=="String"){var d=document.getElementById("field"+c+"_maxLength");if(d!=null&&d.value!=""&&d.value!="-1"&&(trim(e.value).length>parseInt(d.value))){jAlert(a_empprofile_maxLengthMsg2_1+a+a_empprofile_maxLengthMsg2_2+d.value+a_empprofile_maxLengthMsg2_3,"",e);e.style.borderColor="red";return false}}else{if(h!=null&&h.value=="Number"){var p=document.getElementById("field"+c+"_minLength");var t=document.getElementById("field"+c+"_maxLength");if(isNaN(e.value)){jAlert(a_dynamic_al_5_21+a,"",e);e.style.borderColor="red";return false}if(p!=null&&p.value!="-1"&&(parseFloat(e.value)<parseFloat(p.value))){jAlert(a_empprofile_minValueMsg2_1+a+a_empprofile_minValueMsg2_2+p.value+a_empprofile_minValueMsg2_3,"",e);e.style.borderColor="red";return false}if(t!=null&&t.value!="-1"&&(parseFloat(e.value)>parseFloat(t.value))){jAlert(a_empprofile_maxValueMsg2_1+a+a_empprofile_maxValueMsg2_2+t.value+a_empprofile_maxValueMsg2_3,"",e);e.style.borderColor="red";return false}}else{if(h!=null&&h.value=="Date"){var p=document.getElementById("field"+c+"_minValue");var t=document.getElementById("field"+c+"_maxValue");if(p!=null&&p.value!="-1"&&trim(p.value)!=""&&trim(e.value)!=""&&(compareDates(p.value,e.value)==1)){jAlert(a_empprofile_earliestDateMsg2_1+a+a_empprofile_earliestDateMsg2_2+p.value+a_empprofile_earliestDateMsg2_3,"",e);e.style.borderColor="red";return false}if(t!=null&&t.value!="-1"&&trim(t.value)!=""&&trim(e.value)!=""&&(compareDates(e.value,t.value)==1)){jAlert(a_empprofile_latestDateMsg2_1+a+a_empprofile_latestDateMsg2_2+t.value+a_empprofile_latestDateMsg2_3,"",e);e.style.borderColor="red";return false}}}}}}}}}if(l!=null){for(var r=0;r<l.value;r++){if(dwr.util.getValue("add_bene_name_"+r)==""){jAlert(a_empprofile_beneficiaryNameError,"",document.getElementById("add_bene_name_"+r));document.getElementById("add_bene_name_"+r).style.borderColor="red";return false}if(dwr.util.getValue("add_bene_gender_"+r)==-1){jAlert(a_empprofile_beneficiaryGenderError,"",document.getElementById("add_bene_gender_"+r));document.getElementById("add_bene_gender_"+r).style.borderColor="red";return false}if(dwr.util.getValue("add_bene_relationShip_"+r)==-1){jAlert(a_empprofile_beneficiaryRelationshipError,"",document.getElementById("add_bene_relationShip_"+r));document.getElementById("add_bene_relationShip_"+r).style.borderColor="red";return false}var f=document.getElementById("add_bene_percentageId_"+r).value;g=g+parseInt(f);if(document.getElementById("sizeOfAdditionalFields")!=null){var u=document.getElementById("sizeOfAdditionalFields").value;for(var q=0;q<u;q++){if(document.getElementById("add_bene_fieldName"+q+r)!=null){var c=document.getElementById("add_bene_fieldName"+q+r).value;var e=document.getElementById(c);var h=document.getElementById("add_bene_field"+c+"_type");var a=document.getElementById("add_bene_fieldMandatoryLabel"+q+r).value;if(e!=null){if(document.getElementById("add_bene_fieldMandatoryVal"+q+r)!=null&&document.getElementById("add_bene_fieldMandatoryVal"+q+r).value.toUpperCase()=="Yes".toUpperCase()){if(e.value==""||e.value=="-1"){jAlert(a_empprofile_specifyValueFor2+a,"",e);e.style.borderColor="red";return false}}if(h!=null&&h.value=="String"){var d=document.getElementById("add_bene_field"+c+"_maxLength");if(d!=null&&d.value!=""&&d.value!="-1"&&(trim(e.value).length>parseInt(d.value))){jAlert(a_empprofile_maxLengthMsg2_1+a+a_empprofile_maxLengthMsg2_2+d.value+a_empprofile_maxLengthMsg2_3,"",e);e.style.borderColor="red";return false}}else{if(h!=null&&h.value=="Number"){var p=document.getElementById("add_bene_field"+c+"_minLength");var t=document.getElementById("add_bene_field"+c+"_maxLength");if(isNaN(e.value)){jAlert(a_dynamic_al_5_21+a+a_dynamic_al_5_22,"",e);e.style.borderColor="red";return false}if(p!=null&&p.value!="-1"&&(parseFloat(e.value)<parseFloat(p.value))){jAlert(a_empprofile_minValueMsg2_1+a+a_empprofile_minValueMsg2_2+p.value+a_empprofile_minValueMsg2_3,"",e);e.style.borderColor="red";return false}if(t!=null&&t.value!="-1"&&(parseFloat(e.value)>parseFloat(t.value))){jAlert(a_empprofile_maxValueMsg2_1+a+a_empprofile_maxValueMsg2_2+t.value+a_empprofile_maxValueMsg2_3,"",e);e.style.borderColor="red";return false}}else{if(h!=null&&h.value=="Date"){var p=document.getElementById("add_bene_field"+c+"_minValue");var t=document.getElementById("add_bene_field"+c+"_maxValue");if(p!=null&&p.value!="-1"&&trim(p.value)!=""&&trim(e.value)!=""&&(compareDates(p.value,e.value)==1)){jAlert(a_empprofile_earliestDateMsg2_1+a+a_empprofile_earliestDateMsg2_2+p.value+a_empprofile_earliestDateMsg2_3,"",e);e.style.borderColor="red";return false}if(t!=null&&t.value!="-1"&&trim(t.value)!=""&&trim(e.value)!=""&&(compareDates(e.value,t.value)==1)){jAlert(a_empprofile_latestDateMsg2_1+a+a_empprofile_latestDateMsg2_2+t.value+a_empprofile_latestDateMsg2_3,"",e);e.style.borderColor="red";return false}}}}}}}}}}if(g>100||g<100){jAlert(a_empprofile_beneficiaryTotalAllocationError);return false}return true}function setWFVariablesBeneficiaryHandler(){document.getElementById("curPersistenceClass").value="saigun.empxtrack.persistencehelpers.BeneficiaryPersistence";document.getElementById("workflowType").value="BeneficiaryData";if(userWFActionEmpBeneficiary!="save"&&userWFActionEmpBeneficiary!="submit"){document.getElementById("wfAction").value="create-submit"}};
